<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Music Playlist</title>
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,0,0"
    />
    <link rel="stylesheet" href="/assets/themes.css" />
    <link rel="stylesheet" href="style.css" />
    <script src="/assets/themes.js" defer></script>
  </head>
  <body>
    <div class="playlist-container">
      <div class="playlist-header">
        <label for="coverUpload">
        <img
            id="playlistCover"
            class="playlist-cover"
            src=""
          alt="Playlist Cover"
          />
        </label>
        <input
          type="file"
          id="coverUpload"
          accept="image/*"
          style="display: none"
        />

        <div class="title-container">
          <h1 id="playlistTitle" class="playlist-title"></h1>
          <button id="editTitleButton" class="edit-title-button"> 
            <span class="material-symbols-rounded">edit</span>
          </button>
        </div>
      </div>

      <div class="playlist-info">
        <p id="songCount" class="song-count"></p>
        <div class="playlist-controls">
          <button id="backToLibrary" class="control-button back-button">
            <span class="material-symbols-rounded">arrow_back</span>
            <span>Back to Library</span>
          </button>
          <button id="playButton" class="control-button play-button">
            <span class="material-symbols-rounded">play_circle</span>
            <span>Play</span>
          </button>
          <button id="shuffleButton" class="control-button shuffle-button">
            <span class="material-symbols-rounded">shuffle</span>
            <span>Shuffle</span>
          </button>
          <button id="addSongButton" class="control-button add-songs-button">
            <span class="material-symbols-rounded">add</span>
            <span>Add Songs</span>
          </button>
          <input
            type="file"
            id="fileInput"
            accept=".mp3"
            style="display: none"
          />
          <button id="removeSongButton" class="control-button remove-songs-button">
            <span class="material-symbols-rounded">remove</span>
            <span>Remove Songs</span>
          </button>
        </div>
      </div>

      <!-- Loading Animation -->
      <div id="loading" class="loading">
        <div class="spinner"></div>
        <p>Fetching song details...</p>
      </div>
      <!-- Error Message -->
      <div id="errorMessage" class="error-message"></div>

      <div id="songList" class="song-list"></div>

      <!-- Manual Song Entry Form (Hidden by Default) -->
      <div id="manualEntryForm" class="manual-entry">
        <h3>Enter Song Details</h3>
        <input type="text" id="manualTitle" placeholder="Song Title" />
        <input type="text" id="manualArtist" placeholder="Artist" />
        <input
          type="text"
          id="manualCover"
          placeholder="Cover URL (optional)"
        />
        <button id="confirmManualEntry">âœ” Add Song</button>
      </div>
    </div>

    <div id="successMessage" class="success-message"></div>

    <!-- Popup Modal for Changing Playlist Name -->
    <div id="editTitleModal" class="modal">
      <div class="modal-content">
        <h2>Change Playlist Name</h2>
        <input type="text" id="newPlaylistTitle" placeholder="Enter new name" />
        <button id="saveNewTitle">Save</button>
        <button id="cancelEditTitle">Cancel</button>
      </div>
          </div>

    <!-- Duplicate Song Confirmation Modal -->
    <div id="duplicateSongModal" class="modal" style="display: none;">
      <div class="modal-content">
        <h2>Duplicate Song</h2>
        <p>
          This song is already in the playlist. Do you still want to add it?
        </p>
        <div class="modal-buttons">
          <button id="confirmDuplicate" class="modal-button confirm">Yes</button>
          <button id="cancelDuplicate" class="modal-button cancel">No</button>
        </div>
      </div>
    </div>

    <script type="module" src="../../assets/indexedDB.js"></script>
    <script type="module" src="script.js"></script>
  </body>
</html>
